---
- hosts: master
  become_user: ubuntu
  tasks:
  - name: showing the output
    shell: |
       kubectl get nodes
       kubectl get nodes -o wide
- hosts: master
  become_user: ubuntu
  tasks:
  - name: cloning the repo
    git:
      repo: https://github.com/Dabbeeru/terraform-with-ansible.git
      dest: /home/ubuntu/terraform-with-ansible
  - name: executing the kubectl commands
    shell: |
      cd cicd
      kubectl apply -f deployment.yml
      kubectl apply -f service.yml
      cd ~
      kubectl get svc
